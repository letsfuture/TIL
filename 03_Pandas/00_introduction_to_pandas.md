# 판다스 입문

## 1. 시리즈(Series)

- 데이터가 순차적으로 나열된 **1차월 배열**의 형태

- **딕셔너리 혹은 리스트 → 시리즈 변환**

  - `pandas.Series(딕셔너리 혹은 리스트)`

- 리스트를 시리즈로 변환할 때는 딕셔너리의 키처럼 인덱스로 변환될 값이 없음. 따라서 인덱스를 별도로 정의하지 않으면, 디폴트로 정수형 위치 인덱스(0, 1, 2, ...)가 자동으로 지정됨.

- 리스트 또는 튜플을 시리즈로 만들 때 정수형 위치 인덱스 대신 인덱스 이름을 따로 지정할 수 있음.

- **정수형 위치 인덱스**를 사용할 때는 범위의 끝이 포함되지 않으나, **인덱스의 이름**을 사용하면 범위의 끝이 포함됨.

  ```python
  df[1:2]        # 인덱스 1에 위치한 A만 출력됨
  df[['A', 'B']] # 인덱스 A, B 모두 출력됨
  ```

<br>

## 2. 데이터프레임(DataFrame)

- 여러 개의 시리즈들이 한데 모여서 데이터프레임을 이루는 구조로, 2차원 배열임.

- 데이터프레임의 열은 각각 시리즈 객체임.

- **딕셔너리 → 데이터프레임 변환**

  - `pd.DataFrame(딕셔너리 객체)`

    ```python
    dict_data = {'c0':[1, 2, 3], 'c1':[4, 5, 6]}
    df = pd.DataFrame(dict_data)
    ```

- **행 인덱스/열 이름 설정**

  - `pd.DataFrame(2차원 배열, index=행 인덱스 배열, columns=열 이름 배열)`

    ```python
    df = pd.DataFrame([[20, '남', '배우'],
                       [21, '남', '모델']],
                      index=['손석구', '주우재'],
                      columns=['나이', '성별', '직업'])
    ```

- **행 인덱스/열 이름 변경**
  - `DataFrame객체.index = 새로운 행 인덱스 배열`
  - `DataFrame객체.columns = 새로운 열 이름 배열`

- **행 인덱스/열 이름 일부 변경**

  - `DataFrame객체.rename(index={기존 인덱스:새 인덱스, ...})`
  - `DataFrame객체.rename(columns={기존 이름:새 이름, ...})`
  - **딕셔너리 형태**로 적는 것에 유의
  - 원본 객체를 직접 수정하는 것이 아니라 새로운 데이터프레임 객체를 반환하는 점에 유의, 원본 객체를 변경하려면 `inplace=True` 옵션을 사용해야 함.

- **행/열 삭제**

  - **행 삭제:** `DataFrame객체.drop(행 인덱스 또는 배열, axis=0)`
  - **열 삭제:** `DataFrame객체.drop(열 이름 또는 배열, axis=1)`
  - 원본 객체를 변경하지 않고 새로운 객체를 반환한다는 점에 유의, 이 역시 `inplace=True` 옵션을 사용해야 원본 객체가 변경됨.
  - `drop()` 메소드의 default 값은 `axis=0`임.

- **행 선택**

  | 구분      | loc                                             | iloc                                                |
  | --------- | ----------------------------------------------- | --------------------------------------------------- |
  | 탐색 대상 | 인덱스 이름(index label)                        | 정수형 위치 인덱스(integer position)                |
  | 범위 지정 | 범위의 끝 포함<br>예) ['a':'c'] → 'a', 'b', 'c' | 범위의 끝 제외<br>예) [3:7] → 3, 4, 5, 6 (* 7 제외) |

- **열 선택**

  - **열 1개 선택(시리즈 생성):** `DataFrame객체['열 이름']` 또는 `DataFrame객체.열 이름`
  - **열 n개 선택(데이터프레임 생성):** `DataFrame객체[[열1, 열2, ..., 열n]]`

- **원소 선택**

  - **인덱스 이름:** `DataFrame객체.loc[행 인덱스, 열 이름]`

  - **정수 위치 인덱스:** `DataFrame객체.iloc[행 번호, 열 번호]`

    ```python
    # 하나의 원소 선택
    df.loc['손석구', '영화']            # 행 인덱스가 '손석구'이고, 열 이름이 '영화'인 원소
    df.iloc[0, 2]                     # 0행 2열에 속하는 원소
    
    # 2개 이상의 원소 선택
    df.loc['손석구', ['영화', '드라마']] # 행 인덱스가 '손석구'이고, 열 이름이 '영화', '드라마'인 원소들
    df.iloc[0, [2, 3]]                # 0행 2, 3열에 속하는 원소
    ```

- **행/열 추가**

  - `DataFrame 객체['추가하려는 열 이름'] = 데이터 값`

  - `DataFrame 객체['새로운 행 이름'] = 데이터 값(또는 배열)`

    ```python
    # 행 추가
    df.loc[3] = 0                  # 3행의 모든 열에 0을 추가
    df.loc[4] = ['서강준', 100, 90] # 새로운 행 추가 - 원소 값이 여러 개인 배열 입력
    df.loc[5] = df.loc[3]          # 새로운 행을 기존의 행을 복사해서 추가
    
    # 열 추가
    df['예능'] = 0
    ```

- **원소 값 변경**

  - `DataFrame객체의 일부분 또는 원소를 선택 = 새로운 값`

    ```python
    df.iloc[0][3] = 80
    df.loc['서인국']['드라마'] = '응답하라1997'
    df.loc['서인국']['드라마'] = '너를기억해' 
    ```

- **행/열 위치 바꾸기**

  - `DataFrame객체.transpose()` 또는 `DataFrame객체.T`

<br>

## 3. 인덱스 활용

- **행 인덱스 재배열**
  - `DataFrame객체.reindex(새로운 인덱스 배열)`
  - `reindex()` 메소드를 사용하면 데이터프레임의 행 인덱스를 새로운 배열로 지정할 수 있음.
  - 기존 객체를 변경하지 않고 새로운 데이터프레임 객체를 반환함.
  - 기존 데이터프레임이 존재하지 않는 행 인덱스가 새롭게 추가되는 경우 그 행의 데이터 값은 NaN 값이 입력됨.
  - `fill_value` 옵션을 이용하면 NaN 값에 특정 값을 지정할 수 있음.
    - 예) `df.reindex(new_index, fill_value=0)`
- **행 인덱스 초기화**
  - `DataFrame객체.reset_index()`
  - 행 인덱스를 정수형 위치 인덱스로 초기화하며 기존 행 인덱스는 열로 이동함.
  - 새로운 데이터프레임 객체를 반환함.
- **행 인덱스 기준 정렬**
  - `DataFrame객체.sort_index()`
  - `ascending` 옵션을 이용해 오름차순 또는 내림차순을 설정함.
- **특정 열의 데이터 값을 기준으로 데이터프레임 정렬하기**
  - `DataFrame객체.sort_values()`

<br>

# [참고 자료]

- 오승환, 『파이썬 머신러닝 판다스 데이터 분석』, 정보문화사(2019), p.2-55
